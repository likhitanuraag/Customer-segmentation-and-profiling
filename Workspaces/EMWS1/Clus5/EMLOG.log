*------------------------------------------------------------*
User:                20161277
Date:                September 28, 2020
Time:                02:39:12
Site:                10008783
Platform:            X64_DS08R2
Maintenance Release: 9.04.01M3P062415
EM Version:          14.1
* 
*------------------------------------------------------------*
* Training Log
Date:                September 28, 2020
Time:                02:39:05
*------------------------------------------------------------*
10865  proc freq data=EMWS1.Clus5_VariableSet noprint;
10866  table ROLE*LEVEL/out=WORK.Clus5META;
10867  run;
 
NOTE: There were 8 observations read from the data set EMWS1.CLUS5_VARIABLESET.
NOTE: The data set WORK.CLUS5META has 2 observations and 4 variables.
NOTE: PROCEDURE FREQ used (Total process time):
      real time           0.02 seconds
      cpu time            0.03 seconds
 
 
10868  proc print data=WORK.Clus5META label noobs;
10869  var ROLE LEVEL COUNT;
10870  label ROLE = "%sysfunc(sasmsg(sashelp.dmine, meta_role_vlabel, NOQUOTE))" LEVEL = "%sysfunc(sasmsg(sashelp.dmine, meta_level_vlabel, NOQUOTE))" COUNT = "%sysfunc(sasmsg(sashelp.dmine, rpt_count_vlabel, NOQUOTE))";
10871  title9 ' ';
10872  title10 "%sysfunc(sasmsg(sashelp.dmine, rpt_varSummary_title  , NOQUOTE))";
10873  run;
 
NOTE: There were 2 observations read from the data set WORK.CLUS5META.
NOTE: The PROCEDURE PRINT printed page 1.
NOTE: PROCEDURE PRINT used (Total process time):
      real time           0.00 seconds
      cpu time            0.01 seconds
 
 
10874  title10;
 
10875  data WORK.M29UYT88;
10876  set WORK.M29UYT88;
10877  if role eq 'REJECTED' then role = 'INPUT';
10878  run;
 
NOTE: There were 8 observations read from the data set WORK.M29UYT88.
NOTE: The data set WORK.M29UYT88 has 8 observations and 21 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
10887  *------------------------------------------------------------*;
10888  * Clus5: Training;
10889  *------------------------------------------------------------*;
10890  *------------------------------------------------------------* ;
10891  * Clus5: DMDBClass Macro ;
10892  *------------------------------------------------------------* ;
10893  %macro DMDBClass;
10894      Career(ASC) Contact_Type(ASC) Education(ASC) Marital_Statues(ASC) Mortage(ASC)
10895     Personal_Loan(ASC)
10896  %mend DMDBClass;
10897  *------------------------------------------------------------* ;
10898  * Clus5: DMDBVar Macro ;
10899  *------------------------------------------------------------* ;
10900  %macro DMDBVar;
10901      Age Number_of_Contacts
10902  %mend DMDBVar;
10903  *------------------------------------------------------------*;
10904  * Clus5: Create DMDB;
10905  *------------------------------------------------------------*;
10906  proc dmdb batch data=EMWS1.FIMPORT3_train
10907  dmdbcat=WORK.Clus5_DMDB
10908  maxlevel = 513
10909  out=WORK.Clus5_DMDB
10910  ;
10911  class %DMDBClass;
10912  var %DMDBVar;
10913  run;
 
NOTE: Records processed = 38245   Memory used = 511K.
NOTE: View EMWS1.FIMPORT3_TRAIN.VIEW used (Total process time):
      real time           0.06 seconds
      cpu time            0.04 seconds
 
NOTE: There were 38245 observations read from the data set EMWS1.FIMPORT3_DATA.
NOTE: There were 38245 observations read from the data set EMWS1.FIMPORT3_TRAIN.
NOTE: The data set WORK.CLUS5_DMDB has 38245 observations and 8 variables.
NOTE: PROCEDURE DMDB used (Total process time):
      real time           0.07 seconds
      cpu time            0.06 seconds
 
 
10914  quit;
10915  *--- end code ---*;
 
10916  *------------------------------------------------------------* ;
10917  * Clus5: Interval Inputs Macro ;
10918  *------------------------------------------------------------* ;
10919  %macro DMVQINTERVAL;
10920      Age Number_of_Contacts
10921  %mend DMVQINTERVAL;
10922  *------------------------------------------------------------* ;
10923  * Clus5: Nominal Inputs Macro ;
10924  *------------------------------------------------------------* ;
10925  %macro DMVQNOMINAL;
10926      Career Contact_Type Education Marital_Statues Mortage Personal_Loan
10927  %mend DMVQNOMINAL;
10928  *------------------------------------------------------------*;
10929  * Clus5: Run DMVQ procedure;
10930  *------------------------------------------------------------*;
10931  title;
10932  options nodate;
10933  proc dmvq data=WORK.Clus5_DMDB dmdbcat=WORK.Clus5_DMDB std=STD nominal=GLM ordinal=RANK
10934  ;
NOTE: The training set WORK.CLUS5_DMDB.DATA has 8 variable(s).
NOTE: The DMVQ statement has finished with return code=0 and status=begin.
10935  input %DMVQINTERVAL / level=interval;
NOTE: 2 input variable(s) defined for ID=I1.
NOTE: The INPUT statement has finished with return code=0 and status=variables.
10936  input %DMVQNOMINAL / level=nominal;
NOTE: 6 input variable(s) defined for ID=I2.
NOTE: The INPUT statement has finished with return code=0 and status=variables.
10937  VQ maxc = 5 clusname=_SEGMENT_ CLUSLABEL="Segment Id" DISTLABEL="Distance";
NOTE: A maximum of 5 clusters have been requested.
NOTE: The VQ statement has finished with return code=0 and status=architecture.
10938  MAKE outvar=EMWS1.Clus5_OUTVAR;
 
NOTE: 8 input variable(s).
NOTE: Number of cases=38245
NOTE: Sum of frequencies=38245
NOTE: Sum of weights=38245
NOTE: VARDEF=DF
NOTE: Maximum number of categories=11
NOTE: The total number of variables is 8 with dimensionality 27.
NOTE: 8 variables will be used for clustering.
NOTE: Open output data set EMWS1.CLUS5_OUTVAR.DATA with 28 variables.
NOTE: The data set EMWS1.CLUS5_OUTVAR has 4 observations and 28 variables.
NOTE: The MAKE statement has finished with return code=0 and status=made.
10939  INITIAL radius=0
10940  ;
NOTE: 5 seeds were selected from data set WORK.CLUS5_DMDB.DATA using the SEPARATE algorithm.
NOTE: The INITIAL statement has finished with return code=0 and status=initialized.
10941  TRAIN tech=FORGY
10942  ;
WARNING: The limit of 10 iterations was reached without convergence.
NOTE: The TRAIN statement has finished with return code=0 and status=trained.
10943  SAVE outstat=EMWS1.Clus5_OUTSTAT outmean=EMWS1.Clus5_OUTMEAN;
NOTE: The data set EMWS1.CLUS5_OUTSTAT has 46 observations and 30 variables.
NOTE: The data set EMWS1.CLUS5_OUTMEAN has 5 observations and 36 variables.
NOTE: The SAVE statement has finished with return code=0 and status=statistics.
10944  code file="C:\Users\20161277\Documents\CA assign 2 data\20161277_CAassignment2\Workspaces\EMWS1\Clus5\DMVQSCORECODE.sas"
10945  group=Clus5
10946  ;
NOTE: External file C:\Users\20161277\Documents\CA assign 2 data\20161277_CAassignment2\Workspaces\EMWS1\Clus5\DMVQSCORECODE.sas opened.
NOTE: The CODE statement has finished with return code=0 and status=statistics.
10947  run;
 
10948  quit;
 
NOTE: There were 38245 observations read from the data set WORK.CLUS5_DMDB.
NOTE: PROCEDURE DMVQ used (Total process time):
      real time           0.20 seconds
      cpu time            0.18 seconds
 
 
10949  libname _spdslib;
WARNING: Libref _SPDSLIB is not assigned.
 
10950  *------------------------------------------------------------*;
10951  * Clus5: Cluster Label;
10952  *------------------------------------------------------------*;
10953  data EMWS1.Clus5_LABEL;
10954  length _SEGMENT_ 8 Label $80;
10955  format _SEGMENT_ 4.;
10956  label _SEGMENT_ = "%sysfunc(sasmsg(sashelp.dmine, rpt_segmentName_vlabel,  NOQUOTE))";
10957  label Label = "%sysfunc(sasmsg(sashelp.dmine, rpt_segmentLabel_vlabel,  NOQUOTE))";
10958  _SEGMENT_= 1;
10959  Label='Cluster1';
10960  output;
10961  _SEGMENT_= 2;
10962  Label='Cluster2';
10963  output;
10964  _SEGMENT_= 3;
10965  Label='Cluster3';
10966  output;
10967  _SEGMENT_= 4;
10968  Label='Cluster4';
10969  output;
10970  _SEGMENT_= 5;
10971  Label='Cluster5';
10972  output;
10973  run;
 
NOTE: The data set EMWS1.CLUS5_LABEL has 5 observations and 2 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
*------------------------------------------------------------*
* Score Log
Date:                September 28, 2020
Time:                02:39:06
*------------------------------------------------------------*
11075  proc transpose data=EMWS1.Clus5_OUTVAR out=WORK.Clus5_OUTVAR(rename=(COl2=NAME) where=(COL1='IMPUTED'));
11076  var Age--Personal_Loanyes;
11077  where _TYPE_ in('TYPE' 'VARIABLE');
11078  run;
 
NOTE: There were 2 observations read from the data set EMWS1.CLUS5_OUTVAR.
      WHERE _TYPE_ in ('TYPE', 'VARIABLE');
NOTE: The data set WORK.CLUS5_OUTVAR has 0 observations and 4 variables.
NOTE: PROCEDURE TRANSPOSE used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
11079  proc sort data=WORK.Clus5_OUTVAR;
11080  by NAME;
11081  run;
 
NOTE: Input data set is empty.
NOTE: The data set WORK.CLUS5_OUTVAR has 0 observations and 4 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.00 seconds
      cpu time            0.01 seconds
 
 
11082  proc sort data=EMWS1.Clus5_VariableSet(KEEP=NAME ROLE LEVEL) out=WORK.Clus5_SORTEDVARS;
11083  by NAME;
11084  run;
 
NOTE: There were 8 observations read from the data set EMWS1.CLUS5_VARIABLESET.
NOTE: The data set WORK.CLUS5_SORTEDVARS has 8 observations and 3 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.00 seconds
      cpu time            0.01 seconds
 
 
11085  data WORK.Clus5_OUTVAR;
11086  merge WORK.Clus5_OUTVAR(in=INVAR) WORK.Clus5_SORTEDVARS;
11087  by NAME;
11088  if INVAR then output;
11089  run;
 
WARNING: Multiple lengths were specified for the BY variable NAME by input data sets. This might cause unexpected results.
NOTE: There were 0 observations read from the data set WORK.CLUS5_OUTVAR.
NOTE: There were 8 observations read from the data set WORK.CLUS5_SORTEDVARS.
NOTE: The data set WORK.CLUS5_OUTVAR has 0 observations and 6 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
NOTE: This SAS session is using a registry in WORK.  All changes will be lost at the end of this session.
11090  filename emflow "C:\Users\20161277\Documents\CA assign 2 data\20161277_CAassignment2\Workspaces\EMWS1\Clus5\EMFLOWSCORE.sas";
11091  *------------------------------------------------------------*;
11092  * Clus5: Scoring DATA data;
11093  *------------------------------------------------------------*;
11094  data EMWS1.Clus5_TRAIN
11095  / view=EMWS1.Clus5_TRAIN
11096  ;
11097  set EMWS1.FIMPORT3_train
11098  ;
11099  %inc emflow;
11796  run;
 
NOTE: DATA STEP view saved on file EMWS1.CLUS5_TRAIN.
NOTE: A stored DATA STEP view cannot run under a different operating system.
NOTE: View EMWS1.FIMPORT3_TRAIN.VIEW used (Total process time):
      real time           0.03 seconds
      cpu time            0.03 seconds
 
NOTE: DATA statement used (Total process time):
      real time           0.04 seconds
      cpu time            0.06 seconds
 
 
11797  quit;
11798  filename emflow;
NOTE: Fileref EMFLOW has been deassigned.
 
11799  *------------------------------------------------------------*;
11800  * Clus5: Computing metadata for TRAIN data;
11801  *------------------------------------------------------------*;
 
NOTE: View EMWS1.CLUS5_TRAIN.VIEW used (Total process time):
      real time           0.04 seconds
      cpu time            0.04 seconds
 
NOTE: View EMWS1.CLUS5_TRAIN.VIEW used (Total process time):
      real time           0.05 seconds
      cpu time            0.06 seconds
 
*------------------------------------------------------------*
* Report Log
Date:                September 28, 2020
Time:                02:39:06
*------------------------------------------------------------*
12211  data WORK.M34PCL_8;
12212  set WORK.M34PCL_8;
12213  if role eq 'REJECTED' then role = 'INPUT';
12214  run;
 
NOTE: There were 8 observations read from the data set WORK.M34PCL_8.
NOTE: The data set WORK.M34PCL_8 has 8 observations and 21 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
12215  data WORK.M34PCL_8;
12216  set WORK.M34PCL_8 end=_eof_ nobs=_nobs_;
12217  output;
12218  if _eof_ then do;
12219  name = '_SEGMENT_';
12220  ROLE = 'TARGET';
12221  LEVEL = 'NOMINAL';
12222  LABEL = 'Segment Variable';
12223  TYPE = 'N';
12224  FORMAT = '';
12225  INFORMAT = '';
12226  USE='Y';
12227  output;
12228  end;
12229  run;
 
NOTE: There were 8 observations read from the data set WORK.M34PCL_8.
NOTE: The data set WORK.M34PCL_8 has 9 observations and 21 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
12230  *------------------------------------------------------------*;
12231  * Clus5: Create decision matrix;
12232  *------------------------------------------------------------*;
12233  *------------------------------------------------------------* ;
12234  * Clus5: Tree Variables Macro ;
12235  *------------------------------------------------------------* ;
12236  %macro EM_TREEVARS;
12237      Age Career Contact_Type Education Marital_Statues Mortage Number_of_Contacts
12238     Personal_Loan
12239  %mend EM_TREEVARS;
12240  *------------------------------------------------------------* ;
12241  * Clus5: Tree Targets Macro ;
12242  *------------------------------------------------------------* ;
12243  %macro EM_TREETARGETS;
12244      _SEGMENT_
12245  %mend EM_TREETARGETS;
12246  data EMWS1.EM_Clus5 / view=EMWS1.EM_Clus5;
12247  set EMWS1.Clus5_TRAIN(keep=%EM_TREEVARS %EM_TREETARGETS);
12248  run;
 
NOTE: DATA STEP view saved on file EMWS1.EM_CLUS5.
NOTE: A stored DATA STEP view cannot run under a different operating system.
NOTE: View EMWS1.CLUS5_TRAIN.VIEW used (Total process time):
      real time           0.05 seconds
      cpu time            0.04 seconds
 
NOTE: DATA statement used (Total process time):
      real time           0.06 seconds
      cpu time            0.06 seconds
 
 
12249  *------------------------------------------------------------* ;
12250  * Clus5: Interval Inputs Macro ;
12251  *------------------------------------------------------------* ;
12252  %macro INTINPUTS;
12253      Age Number_of_Contacts
12254  %mend INTINPUTS;
12255  *------------------------------------------------------------* ;
12256  * Clus5: Binary and Nominal Inputs Macro ;
12257  *------------------------------------------------------------* ;
12258  %macro NOMINPUTS;
12259      Career Contact_Type Education Marital_Statues Mortage Personal_Loan
12260  %mend NOMINPUTS;
12261  *------------------------------------------------------------* ;
12262  * Clus5: Ordinal Inputs Macro ;
12263  *------------------------------------------------------------* ;
12264  %macro ORDINPUTS;
12265
12266  %mend ORDINPUTS;
12267  *------------------------------------------------------------*;
12268  * Clus5: Run ARBOR procedure;
12269  *------------------------------------------------------------*;
 
12270  proc arbor data=EMWS1.EM_Clus5
12271  MAXSURRS=5
12272  ;
12273  ;
12274  input %INTINPUTS
12275  / level = interval;
12276  input %NOMINPUTS
12277  / level=nominal;
12278  target _SEGMENT_ / level=NOMINAL
12279  Criterion=PROBCHISQ
12280  ;
12281  ;
12282  Performance DISK
12283  ;
12284  MAKEMACRO NLEAVES=nleaves;
NOTE: 1491432 kilobytes of physical memory.
NOTE: Will use 38245 out of 38245 training cases.
NOTE: Using memory pool with 277199872 bytes.
NOTE: Passed training data 18 times.
NOTE: Training used 6581336 bytes of work memory.
NOTE: The subtree sequence contains 25 subtrees. The largest has 49 nodes and 25 leaves.
NOTE: Using subtree with 29 nodes and 15 leaves.
NOTE: Created macro variable NLEAVES equal to 15.
12285  save
12286  MODEL=EMWS1.Clus5_PLOTDS
12287  SEQUENCE=EMWS1.Clus5_OUTSEQ
12288  IMPORTANCE=EMWS1.Clus5_OUTIMPORT
12289  NODESTAT=EMWS1.Clus5_OUTNODES
12290  SUMMARY=WORK.OUTSUMMARY_TREE_0B65M1D
12291  STATSBYNODE=WORK.OUTSTATS_TREE_0B65M1D
12292  Pathlistnonmissing = WORK.OUTPATH_TREE_0B65M1D
12293  Rules = WORK.OUTRULES_TREE_0B65M1D
12294  ;
NOTE: The data set EMWS1.CLUS5_OUTIMPORT has 8 observations and 5 variables.
NOTE: The data set EMWS1.CLUS5_PLOTDS has 2023 observations and 4 variables.
NOTE: The data set EMWS1.CLUS5_OUTNODES has 29 observations and 26 variables.
NOTE: The data set WORK.OUTPATH_TREE_0B65M1D has 87 observations and 7 variables.
NOTE: The data set WORK.OUTRULES_TREE_0B65M1D has 491 observations and 6 variables.
NOTE: The data set EMWS1.CLUS5_OUTSEQ has 25 observations and 11 variables.
NOTE: The data set WORK.OUTSTATS_TREE_0B65M1D has 203 observations and 5 variables.
NOTE: The data set WORK.OUTSUMMARY_TREE_0B65M1D has 24 observations and 8 variables.
12295  run;
 
12296  quit;
 
NOTE: There were 38245 observations read from the data set EMWS1.FIMPORT3_DATA.
NOTE: There were 38245 observations read from the data set EMWS1.FIMPORT3_TRAIN.
NOTE: View EMWS1.EM_CLUS5.VIEW used (Total process time):
      real time           1.54 seconds
      cpu time            1.54 seconds
 
NOTE: There were 38245 observations read from the data set EMWS1.CLUS5_TRAIN.
NOTE: There were 38245 observations read from the data set EMWS1.EM_CLUS5.
NOTE: The data set WORK._NAMEDAT has 5 observations and 5 variables.
NOTE: PROCEDURE ARBOR used (Total process time):
      real time           1.55 seconds
      cpu time            1.56 seconds
 
 
12297  data EMWS1.Clus5_OUTIMPORT;
12298  set EMWS1.Clus5_OUTIMPORT;
12299  label NAME = "%sysfunc(sasmsg(sashelp.dmine, meta_name_vlabel, noquote))" LABEL = "%sysfunc(sasmsg(sashelp.dmine, meta_label_vlabel, noquote))" NRULES = "%sysfunc(sasmsg(sashelp.dmine, rpt_nrules_vlabel, noquote))" IMPORTANCE =
12300     "%sysfunc(sasmsg(sashelp.dmine, rpt_importance_vlabel, noquote))" NSURROGATES = "%sysfunc(sasmsg(sashelp.dmine, rpt_nsurrogates_vlabel, noquote))"
12301  ;
12302  run;
 
NOTE: There were 8 observations read from the data set EMWS1.CLUS5_OUTIMPORT.
NOTE: The data set EMWS1.CLUS5_OUTIMPORT has 8 observations and 5 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
12303  filename x "C:\Users\20161277\Documents\CA assign 2 data\20161277_CAassignment2\Workspaces\EMWS1\Clus5\ENGLISHRULES.txt" encoding='utf-8' NOBOM;
 
12304  data temp;
12305  length varname $18;
12306  retain varname;
12307  set WORK.OUTPATH_TREE_0B65M1D;
12308  if ^missing(variable) then varname=variable;
12309  else if ^missing(var_name) then varname=var_name;
12310  output;
12311  run;
 
NOTE: There were 87 observations read from the data set WORK.OUTPATH_TREE_0B65M1D.
NOTE: The data set WORK.TEMP has 87 observations and 8 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
12312  proc sort data=temp;
12313  by node;
12314  run;
 
NOTE: There were 87 observations read from the data set WORK.TEMP.
NOTE: The data set WORK.TEMP has 87 observations and 8 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
12315  proc sort data=EMWS1.Clus5_OUTNODES out=outnodes;
12316  by node;
12317  run;
 
NOTE: There were 29 observations read from the data set EMWS1.CLUS5_OUTNODES.
NOTE: The data set WORK.OUTNODES has 29 observations and 26 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.00 seconds
      cpu time            0.01 seconds
 
 
12318  data temp;
12319  merge temp(in=_a) outnodes(keep= node
12320  NPRIORS
12321  P__SEGMENT_1
12322  P__SEGMENT_4
12323  P__SEGMENT_2
12324  P__SEGMENT_3
12325  P__SEGMENT_5
12326  );
12327  by node;
12328  if _a;
12329  run;
 
NOTE: There were 87 observations read from the data set WORK.TEMP.
NOTE: There were 29 observations read from the data set WORK.OUTNODES.
NOTE: The data set WORK.TEMP has 87 observations and 14 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.01 seconds
 
 
12330  proc sort data=temp;
12331  by node descending varname descending numeric_value;
12332  run;
 
NOTE: There were 87 observations read from the data set WORK.TEMP.
NOTE: The data set WORK.TEMP has 87 observations and 14 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
12333  data _null_;
12334  file x;
12335  set temp;
12336  by node descending varname;
12337  retain origvar oldnode string;
12338  length origvar $32 oldnode 8 string $200;
12339  if _n_ = 1 then do;
12340  origvar = varname;
12341  oldnode = node;
12342  end;
12343  if first.node then do;
12344  put "&EM_CODEBAR";
12345  put " Node = " node;
12346  put "&EM_CODEBAR";
12347  end;
12348  if first.varname then do;
12349  if RELATION ^in ("=", "ISMISSING", "ISNOTMISSING") then do;
12350  if MISSING(CHARACTER_VALUE) then do;
12351  if NUMERIC_VALUE ne . then do;
12352  if ^first.node then do;
12353  string= "AND "|| strip(varname)||" "||strip(relation)||" "||strip(numeric_value);
12354  end;
12355  else do;
12356  string= "if "|| strip(varname)||" "||strip(relation)||" "||strip(numeric_value);
12357  end;
12358  end;
12359  end;
12360  else do;
12361  if ^first.node then do;
12362  string= "AND "|| strip(varname)||" "||strip(relation)||" "||strip(character_value);
12363  end;
12364  else do;
12365  string= "if "|| strip(varname)||" "||strip(relation)||" "||strip(character_value);
12366  end;
12367  end;
12368  end;
12369  else if RELATION in ("=") then do;
12370  if ^first.node then do;
12371  string = "AND "||strip(varname) ||" IS ONE OF: "||character_value;
12372  end;
12373  else do;
12374  string = "if "|| strip(varname) ||" IS ONE OF: "||character_value;
12375  end;
12376  end;
12377  else if RELATION in ("ISMISSING") then do;
12378  if ^first.node then do;
12379  string = " AND "|| strip(varname) || " equals Missing";
12380  end;
12381  else do;
12382  string = "if "|| strip(varname) ||" equals Missing";
12383  end;
12384  end;
12385  else if RELATION in ("ISNOTMISSING") then do;
12386  if ^first.node then do;
12387  string = " AND "|| strip(varname) || " equals All Values";
12388  end;
12389  else do;
12390  string = "if "|| strip(varname) ||" equals All Values";
12391  end;
12392  end;
12393  if ^missing(varname) then origvar = varname;
12394  oldnode=node;
12395  end;
12396  else do;
12397  if RELATION ^in ("=", "ISMISSING", "ISNOTMISSING") then do;
12398  if MISSING(CHARACTER_VALUE) then do;
12399  if NUMERIC_VALUE ne . then do;
12400  if ^MISSING(string) then string= strip(string)||" AND "|| strip(varname)||" "||strip(relation)||" "||strip(numeric_value);
12401  else string= " if "|| strip(varname)||" "||strip(relation)||" "||strip(numeric_value);
12402  end;
12403  end;
12404  else do;
12405  if ^MISSING(string) then string= strip(string)||" AND "|| strip(varname)||" "||strip(relation)||" "||strip(character_value);
12406  else string= " if "|| strip(varname)||" "||strip(relation)||" "||strip(character_value);
12407  end;
12408  end;
12409  else if RELATION in ("=") then do;
12410  string = strip(string)||", "||strip(character_value);
12411  end;
12412  else if RELATION in ("ISMISSING") then do;
12413  end;
12414  if ^missing(varname) then origvar = varname;
12415  oldnode=node;
12416  end;
12417  if last.varname then do;
12418  if RELATION in ("ISMISSING") then do;
12419  if ^first.varname then do;
12420  string = strip(string) || " or MISSING";
12421  end;
12422  end;
12423  put string;
12424  if ^missing(varname) then origvar = varname;
12425  oldnode=node;
12426  end;
12427  if last.node then do;
12428  put "then ";
12429  put " Tree Node Identifier   = " node;
12430  put " Number of Observations = " NPRIORS;
12431  put " Predicted: _SEGMENT_=1  = " P__SEGMENT_1;
12432  put " Predicted: _SEGMENT_=4  = " P__SEGMENT_4;
12433  put " Predicted: _SEGMENT_=2  = " P__SEGMENT_2;
12434  put " Predicted: _SEGMENT_=3  = " P__SEGMENT_3;
12435  put " Predicted: _SEGMENT_=5  = " P__SEGMENT_5;
12436  put " ";
12437  if ^missing(varname) then origvar = varname;
12438  oldnode=node;
12439  end;
12440  run;
 
NOTE: Numeric values have been converted to character values at the places given by: (Line):(Column).
      12353:67    12356:66    12400:108   12401:72
NOTE: The file X is:
      Filename=C:\Users\20161277\Documents\CA assign 2 data\20161277_CAassignment2\Workspaces\EMWS1\Clus5\ENGLISHRULES.txt,
      RECFM=V,LRECL=131068,File Size (bytes)=0,
      Last Modified=28Sep2020:02:39:08,
      Create Time=27Sep2020:14:33:50
 
NOTE: 218 records were written to the file X.
      The minimum record length was 1.
      The maximum record length was 69.
NOTE: There were 87 observations read from the data set WORK.TEMP.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.01 seconds
 
 
12441  filename x;
NOTE: Fileref X has been deassigned.
 
12442  /* belowtext */
12443  data templabel;
12444  set WORK.OUTRULES_TREE_0B65M1D;
12445  if ((ROLE="PRIMARY") AND (STAT ="LABEL"));
12446  rename character_value = belowtext;
12447  keep NODE character_value;
12448  run;
 
NOTE: There were 491 observations read from the data set WORK.OUTRULES_TREE_0B65M1D.
NOTE: The data set WORK.TEMPLABEL has 0 observations and 2 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
12449  data tempvar;
12450  set WORK.OUTRULES_TREE_0B65M1D;
12451  if ((ROLE="PRIMARY") AND (STAT="VARIABLE"));
12452  keep NODE character_value;
12453  run;
 
NOTE: There were 491 observations read from the data set WORK.OUTRULES_TREE_0B65M1D.
NOTE: The data set WORK.TEMPVAR has 14 observations and 2 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
12454  proc sort data=templabel;
12455  by node;
12456  run;
 
NOTE: Input data set is empty.
NOTE: The data set WORK.TEMPLABEL has 0 observations and 2 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.00 seconds
      cpu time            0.01 seconds
 
 
12457  proc sort data=tempvar;
12458  by node;
12459  run;
 
NOTE: There were 14 observations read from the data set WORK.TEMPVAR.
NOTE: The data set WORK.TEMPVAR has 14 observations and 2 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.00 seconds
      cpu time            0.01 seconds
 
 
12460  data tempbelow;
12461  merge templabel tempvar;
12462  by node;
12463  if missing(belowtext) then belowtext= character_value;
12464  keep node belowtext;
12465  run;
 
NOTE: There were 0 observations read from the data set WORK.TEMPLABEL.
NOTE: There were 14 observations read from the data set WORK.TEMPVAR.
NOTE: The data set WORK.TEMPBELOW has 14 observations and 2 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
12466  proc sort data=tempbelow;
12467  by node;
12468  run;
 
NOTE: There were 14 observations read from the data set WORK.TEMPBELOW.
NOTE: The data set WORK.TEMPBELOW has 14 observations and 2 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
12469  /* abovetext */
12470  data tempoutrules;
12471  set WORK.OUTRULES_TREE_0B65M1D;
12472  if ((ROLE='PRIMARY') AND(STAT in ("INTERVAL", "ORDINAL", "NOMINAL")));
12473  run;
 
NOTE: There were 491 observations read from the data set WORK.OUTRULES_TREE_0B65M1D.
NOTE: The data set WORK.TEMPOUTRULES has 19 observations and 6 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.01 seconds
 
 
12474  proc sort data=tempoutrules;
12475  by node numeric_value;
12476  run;
 
NOTE: There were 19 observations read from the data set WORK.TEMPOUTRULES.
NOTE: The data set WORK.TEMPOUTRULES has 19 observations and 6 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
12477  data tempabove;
12478  set tempoutrules(rename=(node=parent));
12479  by parent numeric_value;
12480  retain abovetext tempstring flag branch origval origchar;
12481  *length abovetext tempstring origchar $45;
12482  length abovetext $256;
12483  length tempstring origchar $64;
12484  if STAT in ("INTERVAL", "ORDINAL") then do;
12485  if first.parent then do;
12486  if missing(character_value) then do;
12487  numeric_value = round(numeric_value, 0.0001);
12488  abovetext = "< "||strip(NUMERIC_VALUE);
12489  branch = 1;
12490  origval = numeric_value;
12491  output;
12492  end;
12493  else do;
12494  abovetext = "< "||strip(CHARACTER_VALUE);
12495  branch = 1;
12496  origchar = character_value;
12497  output;
12498  end;
12499  if first.parent AND last.parent then do;
12500  if missing(character_value) then do;
12501  numeric_value = round(numeric_value, 0.0001);
12502  branch = branch + 1;
12503  abovetext = ">= "||strip(NUMERIC_VALUE);
12504  output;
12505  end;
12506  else do;
12507  branch = branch + 1;
12508  abovetext = ">= "||strip(CHARACTER_VALUE);
12509  output;
12510  end;
12511  end;
12512  end;
12513  else if last.parent then do;
12514  if ( missing(character_value) AND (origval ne numeric_value)) or ( ^missing(character_value) AND (origchar ne character_value)) then do;
12515  if missing(character_value) then do;
12516  numeric_value = round(numeric_value, 0.0001);
12517  abovetext= "[ "||strip(origval)||", "|| strip(numeric_value)||" )";
12518  end;
12519  else do;
12520  abovetext= ">= "||strip(origchar)||" AND < "|| strip(character_value);
12521  end;
12522  branch = branch + 1;
12523  output;
12524  if missing(character_value) then do;
12525  numeric_value = round(numeric_value, 0.0001);
12526  abovetext = ">= "||strip(NUMERIC_VALUE);
12527  end;
12528  else do;
12529  abovetext = ">= "||strip(CHARACTER_VALUE);
12530  end;
12531  branch = branch + 1;
12532  output;
12533  end;
12534  else do;
12535  if missing(character_value) then do;
12536  numeric_value = round(numeric_value, 0.0001);
12537  abovetext = ">= "||strip(NUMERIC_VALUE);
12538  end;
12539  else do;
12540  abovetext = ">= "||strip(CHARACTER_VALUE);
12541  end;
12542  branch = branch + 1;
12543  output;
12544  end;
12545  end;
12546  else do;
12547  if ( missing(character_value) AND (origval ne numeric_value)) or ( ^missing(character_value) AND (origchar ne character_value)) then do;
12548  if missing(character_value) then do;
12549  numeric_value = round(numeric_value,0.0001);
12550  abovetext= "[ "||strip(origval)||", "|| strip(numeric_value)||" )";
12551  origval = numeric_value;
12552  end;
12553  else do;
12554  abovetext= ">= "||strip(origchar)||" AND < "|| strip(character_value);
12555  origchar = character_value;
12556  end;
12557  branch = branch + 1;
12558  output;
12559  end;
12560  else do;
12561  if missing(character_value) then do;
12562  numeric_value = round(numeric_value, 0.0001);
12563  abovetext = ">= "||strip(NUMERIC_VALUE);
12564  origval = numeric_value;
12565  end;
12566  else do;
12567  abovetext = ">= "||strip(CHARACTER_VALUE);
12568  origval = character_value;
12569  end;
12570  branch = branch + 1;
12571  output;
12572  end;
12573  end;
12574  end;
12575  else do;
12576  if first.numeric_value then do;
12577  flag = 0;
12578  abovetext = CHARACTER_VALUE;
12579  branch = numeric_value;
12580  if first.numeric_value AND last.numeric_value then do;
12581  output;
12582  end;
12583  end;
12584  else if last.numeric_value then do;
12585  if flag=0 then do;
12586  tempstring = strip(abovetext)||", "||CHARACTER_VALUE;
12587  length = length(strip(tempstring));
12588  if length < 32 then do;
12589  abovetext = strip(tempstring);
12590  end;
12591  else do;
12592  abovetext = strip(abovetext)||", ...";
12593  flag = 1;
12594  end;
12595  end;
12596  branch = numeric_value;
12597  output;
12598  end;
12599  else do;
12600  if flag=0 then do;
12601  tempstring = strip(abovetext)||", "||CHARACTER_VALUE;
12602  length = length(strip(tempstring));
12603  if length < 32 then do;
12604  abovetext = strip(tempstring);
12605  end;
12606  else do;
12607  abovetext = strip(abovetext)||", ...";
12608  flag=1;
12609  end;
12610  end;
12611  branch = numeric_value;
12612  end;
12613  end;
12614  keep parent branch abovetext;
12615  run;
 
NOTE: Numeric values have been converted to character values at the places given by: (Line):(Column).
      12488:25   12503:26   12517:24   12517:47   12526:26   12537:26   12550:24   12550:47   12563:26
NOTE: Character values have been converted to numeric values at the places given by: (Line):(Column).
      12568:11
NOTE: There were 19 observations read from the data set WORK.TEMPOUTRULES.
NOTE: The data set WORK.TEMPABOVE has 28 observations and 3 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
12616  /* MIssing value to abovetext */
12617  data tempmissing;
12618  set WORK.OUTRULES_TREE_0B65M1D;
12619  if ((ROLE="PRIMARY") AND (STAT in ("MISSING")));
12620  rename node=parent numeric_value=branch character_value=misschar;
12621  run;
 
NOTE: There were 491 observations read from the data set WORK.OUTRULES_TREE_0B65M1D.
NOTE: The data set WORK.TEMPMISSING has 14 observations and 6 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
12622  proc sort data=work.tempabove;
12623  by parent branch;
12624  run;
 
NOTE: There were 28 observations read from the data set WORK.TEMPABOVE.
NOTE: The data set WORK.TEMPABOVE has 28 observations and 3 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.00 seconds
      cpu time            0.01 seconds
 
 
12625  proc sort data=EMWS1.Clus5_OUTNODES out=tempoutnodes;
12626  by parent branch;
12627  run;
 
NOTE: There were 29 observations read from the data set EMWS1.CLUS5_OUTNODES.
NOTE: The data set WORK.TEMPOUTNODES has 29 observations and 26 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
12628  proc sort data=tempmissing;
12629  by parent branch;
12630  run;
 
NOTE: There were 14 observations read from the data set WORK.TEMPMISSING.
NOTE: The data set WORK.TEMPMISSING has 14 observations and 6 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
12631  data WORK.Clus5_outnodes;
12632  merge work.tempabove tempoutNodes(drop=abovetext ) tempmissing(in=_a);
12633  by parent branch;
12634  length traintotal validtotal 8;
12635  retain traintotal validtotal;
12636  if _a then do;
12637  if ^MISSING(abovetext) then do;
12638  abovetext= strip(abovetext)||" %sysfunc(sasmsg(sashelp.dmine, tree_ormiss_vlabel, noquote))";
12639  end;
12640  else do;
12641  abovetext = " %sysfunc(sasmsg(sashelp.dmine, tree_missonly_vlabel, noquote))";
12642  end;
12643  end;
12644  if MISSING(abovetext) then abovetext="%sysfunc(sasmsg(sashelp.dmine, tree_nonmiss_vlabel, noquote))";
12645  if node=1 then do;
12646  traintotal = N;
12647  validtotal=VN;
12648  end;
12649  label traintotal = "%sysfunc(sasmsg(sashelp.dmine,  rpt_traintotal_vlabel, noquote))";
12650  drop role rank stat misschar belowtext;
12651  run;
 
NOTE: Variable VN is uninitialized.
NOTE: There were 28 observations read from the data set WORK.TEMPABOVE.
NOTE: There were 29 observations read from the data set WORK.TEMPOUTNODES.
NOTE: There were 14 observations read from the data set WORK.TEMPMISSING.
NOTE: The data set WORK.CLUS5_OUTNODES has 29 observations and 28 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
12652  proc sort data=WORK.Clus5_outnodes;
12653  by node;
12654  run;
 
NOTE: There were 29 observations read from the data set WORK.CLUS5_OUTNODES.
NOTE: The data set WORK.CLUS5_OUTNODES has 29 observations and 28 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.00 seconds
      cpu time            0.01 seconds
 
 
12655  proc sort data=tempbelow;
12656  by node;
12657  run;
 
NOTE: Input data set is already sorted, no sorting done.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
12658  data WORK.Clus5_outnodes;
12659  merge WORK.Clus5_outnodes tempbelow;
12660  by node;
12661  run;
 
NOTE: There were 29 observations read from the data set WORK.CLUS5_OUTNODES.
NOTE: There were 14 observations read from the data set WORK.TEMPBELOW.
NOTE: The data set WORK.CLUS5_OUTNODES has 29 observations and 29 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.01 seconds
 
 
NOTE: There were 38245 observations read from the data set EMWS1.FIMPORT3_DATA.
NOTE: There were 38245 observations read from the data set EMWS1.FIMPORT3_TRAIN.
NOTE: View EMWS1.EM_CLUS5.VIEW used (Total process time):
      real time           0.25 seconds
      cpu time            0.24 seconds
 
NOTE: There were 38245 observations read from the data set EMWS1.CLUS5_TRAIN.
12662  data tempoutstats;
12663  set WORK.OUTSTATS_TREE_0B65M1D;
12664  length tarlevel $8;
12665  tarlevel ="NOMINAL";
12666  run;
 
NOTE: There were 203 observations read from the data set WORK.OUTSTATS_TREE_0B65M1D.
NOTE: The data set WORK.TEMPOUTSTATS has 203 observations and 6 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.01 seconds
 
 
12667  data EMWS1.Clus5_TREE_PLOT;
12668  length NODETEXT TEXTALL $800 N NODECOLOR 8;
12669  set WORK.Clus5_outnodes;
12670  label parent = "%sysfunc(sasmsg(sashelp.dmine, rpt_parentID_vlabel, noquote))" depth = "%sysfunc(sasmsg(sashelp.dmine, rpt_depth_vlabel, noquote))" belowtext= "%sysfunc(sasmsg(sashelp.dmine, rpt_belowtext_vlabel, noquote))" abovetext =
12671     "%sysfunc(sasmsg(sashelp.dmine, rpt_abovetext_vlabel, noquote))" linkwidth = "%sysfunc(sasmsg(sashelp.dmine, rpt_linkwidth_vlabel, noquote))" nodetext = "%sysfunc(sasmsg(sashelp.dmine, rpt_nodetext_vlabel, noquote))" textall =
12672     "%sysfunc(sasmsg(sashelp.dmine, rpt_textall_vlabel, noquote))" N = "%sysfunc(sasmsg(sashelp.dmine, rpt_trainn_vlabel, noquote))" nodecolor = "%sysfunc(sasmsg(sashelp.dmine, rpt_nodecolor_vlabel, noquote))" node =
12673     "%sysfunc(sasmsg(sashelp.dmine, rpt_node_vlabel, noquote))";
12674  keep NODE PARENT DEPTH BELOWTEXT ABOVETEXT LINKWIDTH NODETEXT TEXTALL N NODECOLOR;
12675  run;
 
NOTE: Variable TEXTALL is uninitialized.
NOTE: Variable NODECOLOR is uninitialized.
NOTE: There were 29 observations read from the data set WORK.CLUS5_OUTNODES.
NOTE: The data set EMWS1.CLUS5_TREE_PLOT has 29 observations and 10 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
12676  proc sort data=EMWS1.Clus5_TREE_PLOT;
12677  by node;
12678  run;
 
NOTE: There were 29 observations read from the data set EMWS1.CLUS5_TREE_PLOT.
NOTE: The data set EMWS1.CLUS5_TREE_PLOT has 29 observations and 10 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
12679  proc sort data=tempoutstats;
12680  by node;
12681  run;
 
NOTE: There were 203 observations read from the data set WORK.TEMPOUTSTATS.
NOTE: The data set WORK.TEMPOUTSTATS has 203 observations and 6 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.00 seconds
      cpu time            0.01 seconds
 
 
12682  data EMWS1.Clus5_TREE_PLOT;
12683  merge EMWS1.Clus5_TREE_PLOT tempoutstats;
12684  length text $800 _RASE_ P__SEGMENT_1 8;
12685  retain P__SEGMENT_1 eventlevel;
12686  by node;
12687  if statname='N' then N=statvalue;
12688  if statname='NPRIORS' then N=statvalue;
12689  if statname='PREDICTION' then eventlevel=category;
12690  _RASE_ = .;
12691  if tarlevel ^= 'INTERVAL' then do;
12692  if STATNAME = 'PROBABILITY' then do;
12693  if CATEGORY=EVENTLEVEL then do;
12694  nodetext = right(put(strip(CATEGORY)||':', $12.))|| right(put(STATVALUE, percent13.1));
12695  text = right(put(strip(CATEGORY)||':', $12.))|| right(put(STATVALUE, percent13.1));
12696  P__SEGMENT_1 = round(STATVALUE, .01);
12697  end;
12698  else do;
12699  text = right(put(strip(CATEGORY)||':', $12.))|| right(put(STATVALUE, percent13.1));
12700  end;
12701  textall = strip(textall)||'0A'x||strip( text);
12702  end;
12703  if last.node then do;
12704  nodetext = trim(nodetext)||'0A'x||" %sysfunc(sasmsg(sashelp.dmine, rpt_rptcount_vlabel, noquote )):"|| put(N, 13.);
12705  textall = trim(textall)||'0A'x||" %sysfunc(sasmsg(sashelp.dmine, rpt_rptcount_vlabel, noquote )):"|| put(N, 13.);
12706  output EMWS1.Clus5_TREE_PLOT;
12707  end;
12708  end;
12709  else do;
12710  if statname='RASE' then _RASE_=statvalue;
12711  label _RASE_ = "%sysfunc(sasmsg(sashelp.dmine, rpt_trase_vlabel, noquote))";
12712  if STATNAME = 'PREDICTION' then do;
12713  nodetext= "%sysfunc(sasmsg(sashelp.dmine, rpt_average_vlabel, noquote))"|| put(STATVALUE, 13.4)||'0A'x|| "%sysfunc(sasmsg(sashelp.dmine, rpt_rptcount_vlabel, noquote )):"|| put(N, 13.);
12714  textall = nodetext;
12715  P__SEGMENT_1 = STATVALUE;
12716  ;
12717  ;
12718  end;
12719  if last.node then do;
12720  output EMWS1.Clus5_TREE_PLOT;
12721  end;
12722  ;
12723  end;
12724  label P__SEGMENT_1 = "%sysfunc(sasmsg(sashelp.dmine, rpt_predictedvar_vlabel, noquote))";
12725  keep NODE PARENT DEPTH BELOWTEXT ABOVETEXT LINKWIDTH NODETEXT TEXTALL N NODECOLOR _RASE_ P__SEGMENT_1;
12726  run;
 
NOTE: There were 29 observations read from the data set EMWS1.CLUS5_TREE_PLOT.
NOTE: There were 203 observations read from the data set WORK.TEMPOUTSTATS.
NOTE: The data set EMWS1.CLUS5_TREE_PLOT has 29 observations and 12 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
12727  data tempcolor;
12728  set WORK.OUTSTATS_TREE_0B65M1D;
12729  retain eventlevel;
12730  if STATNAME='PREDICTION' then eventlevel=CATEGORY;
12731  run;
 
NOTE: There were 203 observations read from the data set WORK.OUTSTATS_TREE_0B65M1D.
NOTE: The data set WORK.TEMPCOLOR has 203 observations and 6 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.01 seconds
 
 
12732  data tempcolor;
12733  set tempcolor;
12734  if 'NOMINAL' ne 'INTERVAL' then do;
12735  if CATEGORY=EVENTLEVEL AND STATNAME="PROBABILITY";
12736  end;
12737  else do;
12738  if STATNAME="PREDICTION";
12739  end;
12740  run;
 
NOTE: There were 203 observations read from the data set WORK.TEMPCOLOR.
NOTE: The data set WORK.TEMPCOLOR has 29 observations and 6 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.01 seconds
 
 
12741  data tempcolor;
12742  set tempcolor;
12743  length nodecolor 8;
12744  if 'NOMINAL' ne 'INTERVAL' then do;
12745  nodecolor = round(100*(STATVALUE), .01);
12746  end;
12747  else do;
12748  nodecolor=round(statvalue, .01);
12749  end;
12750  keep node nodecolor;
12751  run;
 
NOTE: There were 29 observations read from the data set WORK.TEMPCOLOR.
NOTE: The data set WORK.TEMPCOLOR has 29 observations and 2 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
12752  proc sort data=EMWS1.Clus5_TREE_PLOT;
12753  by node;
12754  run;
 
NOTE: There were 29 observations read from the data set EMWS1.CLUS5_TREE_PLOT.
NOTE: The data set EMWS1.CLUS5_TREE_PLOT has 29 observations and 12 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
12755  proc sort data=tempcolor;
12756  by node;
12757  run;
 
NOTE: There were 29 observations read from the data set WORK.TEMPCOLOR.
NOTE: The data set WORK.TEMPCOLOR has 29 observations and 2 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.00 seconds
      cpu time            0.01 seconds
 
 
12758  data EMWS1.Clus5_TREE_PLOT;
12759  merge EMWS1.Clus5_TREE_PLOT tempcolor;
12760  by node;
12761  length traintotal 8;
12762  retain traintotal;
12763  label traintotal = "%sysfunc(sasmsg(sashelp.dmine,  rpt_traintotal_vlabel, noquote))";
12764  if node=1 then do;
12765  traintotal = N;
12766  end;
12767  if NODE eq . then delete;
12768  run;
 
NOTE: There were 29 observations read from the data set EMWS1.CLUS5_TREE_PLOT.
NOTE: There were 29 observations read from the data set WORK.TEMPCOLOR.
NOTE: The data set EMWS1.CLUS5_TREE_PLOT has 29 observations and 13 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.01 seconds
 
 
12769  data EMWS1.Clus5_TREE_PLOT;
12770  set EMWS1.Clus5_TREE_PLOT;
12771  textall = "%sysfunc(sasmsg(sashelp.dmine, rpt_nodeId_vlabel, noquote, )):"|| put(Node, 13.)||'0A'x||trim(textall);
12772  run;
 
NOTE: There were 29 observations read from the data set EMWS1.CLUS5_TREE_PLOT.
NOTE: The data set EMWS1.CLUS5_TREE_PLOT has 29 observations and 13 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.01 seconds
 
 
12773  data tempout;
12774  set WORK.Clus5_outnodes;
12775  run;
 
NOTE: There were 29 observations read from the data set WORK.CLUS5_OUTNODES.
NOTE: The data set WORK.TEMPOUT has 29 observations and 29 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
12776  proc sort data=tempout;
12777  by descending P__SEGMENT_1;
12778  run;
 
NOTE: There were 29 observations read from the data set WORK.TEMPOUT.
NOTE: The data set WORK.TEMPOUT has 29 observations and 29 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
12779  data tree_temp;
12780  set tempout;
12781  if LEAF ne .;
12782  label index="%sysfunc(sasmsg(sashelp.dmine, rpt_leafindex_vlabel  , NOQUOTE))";
12783  label percevent_train = "%sysfunc(sasmsg(sashelp.dmine, rpt_perc_train_vlabel  , NOQUOTE))";
12784  label perc_train = "%sysfunc(sasmsg(sashelp.dmine, rpt_percevent_train_vlabel  , NOQUOTE))";
12785  label tprob="%sysfunc(sasmsg(sashelp.dmine, rpt_prob_vlabel  , NOQUOTE, %nrbquote()))";
12786  tprob = round(P__SEGMENT_1, .01);
12787  percevent_train = round ( tprob*100, .01);
12788  *perc_train =round( ( N / traintotal)*100, .001);
12789  perc_train =round( ( N / traintotal), .01);
12790  if missing(perc_train) then perc_train = round( linkwidth*100, .001);
12791  index = _n_;
12792  keep NODE index tprob perc_train percevent_train
12793  ;
12794  run;
 
NOTE: There were 29 observations read from the data set WORK.TEMPOUT.
NOTE: The data set WORK.TREE_TEMP has 15 observations and 5 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
12795  proc sort data=tree_temp;
12796  by NODE;
12797  run;
 
NOTE: There were 15 observations read from the data set WORK.TREE_TEMP.
NOTE: The data set WORK.TREE_TEMP has 15 observations and 5 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.00 seconds
      cpu time            0.01 seconds
 
 
12798  proc sort data=EMWS1.Clus5_TREE_PLOT;
12799  by NODE;
12800  run;
 
NOTE: There were 29 observations read from the data set EMWS1.CLUS5_TREE_PLOT.
NOTE: The data set EMWS1.CLUS5_TREE_PLOT has 29 observations and 13 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
12801  data EMWS1.Clus5_TREE_PLOT;
12802  merge EMWS1.Clus5_TREE_PLOT tree_temp;
12803  by NODE;
12804  run;
 
NOTE: There were 29 observations read from the data set EMWS1.CLUS5_TREE_PLOT.
NOTE: There were 15 observations read from the data set WORK.TREE_TEMP.
NOTE: The data set EMWS1.CLUS5_TREE_PLOT has 29 observations and 17 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
12805  proc sort data=EMWS1.Clus5_TREE_PLOT;
12806  by node index;
12807  run;
 
NOTE: There were 29 observations read from the data set EMWS1.CLUS5_TREE_PLOT.
NOTE: The data set EMWS1.CLUS5_TREE_PLOT has 29 observations and 17 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.00 seconds
      cpu time            0.01 seconds
 
 
12808  title9 ' ';
12809  title10 "%sysfunc(sasmsg(sashelp.dmine, rpt_VariableImportance_title, NOQUOTE))";
12810  proc print data=EMWS1.Clus5_OUTIMPORT(where=(IMPORTANCE>0)) noobs label;
12811  run;
 
NOTE: There were 6 observations read from the data set EMWS1.CLUS5_OUTIMPORT.
      WHERE IMPORTANCE>0;
NOTE: The PROCEDURE PRINT printed page 2.
NOTE: PROCEDURE PRINT used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
12812  title10;
 
12813  data WORK.M2WS6WJE;
12814  set WORK.M2WS6WJE;
12815  if role eq 'REJECTED' then role = 'INPUT';
12816  run;
 
NOTE: There were 8 observations read from the data set WORK.M2WS6WJE.
NOTE: The data set WORK.M2WS6WJE has 8 observations and 21 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.01 seconds
 
 
12817  proc sort data=EMWS1.Clus5_OUTIMPORT out=WORK.Clus5_GRAPHVARS(keep=NAME);
12818  where IMPORTANCE>0;
12819  by NAME;
12820  run;
 
NOTE: There were 6 observations read from the data set EMWS1.CLUS5_OUTIMPORT.
      WHERE IMPORTANCE>0;
NOTE: The data set WORK.CLUS5_GRAPHVARS has 6 observations and 1 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.00 seconds
      cpu time            0.01 seconds
 
 
12821  proc sort data = WORK.M2WS6WJE;
12822  by NAME;
12823  run;
 
NOTE: There were 8 observations read from the data set WORK.M2WS6WJE.
NOTE: The data set WORK.M2WS6WJE has 8 observations and 21 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
12824  data WORK.M2WS6WJE;
12825  merge WORK.M2WS6WJE WORK.Clus5_GRAPHVARS(in=_b_);
12826  by NAME;
12827  if _b_ or ROLE = "FREQ" or REPORT="Y" then output;
12828  run;
 
NOTE: There were 8 observations read from the data set WORK.M2WS6WJE.
NOTE: There were 6 observations read from the data set WORK.CLUS5_GRAPHVARS.
NOTE: The data set WORK.M2WS6WJE has 6 observations and 21 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
12829  data WORK.M2WS6WJE;
12830  set WORK.M2WS6WJE end=_eof_ nobs=_nobs_;
12831  output;
12832  if _eof_ then do;
12833  name = '_SEGMENT_';
12834  ROLE = 'BY';
12835  LEVEL = 'NOMINAL';
12836  LABEL = 'Segment Variable';
12837  TYPE = 'N';
12838  FORMAT = '';
12839  INFORMAT = '';
12840  output;
12841  end;
12842  run;
 
NOTE: There were 6 observations read from the data set WORK.M2WS6WJE.
NOTE: The data set WORK.M2WS6WJE has 7 observations and 21 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.01 seconds
 
 
12843  *------------------------------------------------------------* ;
12844  * Clus5: STDIZE Variables Macro ;
12845  *------------------------------------------------------------* ;
12846  %macro stdizevar;
12847      Age Number_of_Contacts
12848  %mend stdizevar;
12849  *------------------------------------------------------------*;
12850  * Clus5: Computing Summary Statistics;
12851  *------------------------------------------------------------*;
12852  proc stdize
12853  data = EMWS1.Clus5_TRAIN
12854  out=_null_
12855  outstat=WORK.Clus5_STAT
12856  add=0 fuzz=1E-14 initial=MAD
12857  vardef=df
12858  method=STD
12859  mult=1
12860  pctlmtd=ORD_STAT pctldef=2
12861  pctlpts=(
12862  0
12863  100
12864  )
12865  ;
12866  var %stdizevar;
12867  run;
 
NOTE: INITIAL= will be ignored.
NOTE: There were 38245 observations read from the data set EMWS1.FIMPORT3_DATA.
NOTE: View EMWS1.CLUS5_TRAIN.VIEW used (Total process time):
      real time           0.23 seconds
      cpu time            0.23 seconds
 
NOTE: There were 38245 observations read from the data set EMWS1.FIMPORT3_TRAIN.
NOTE: There were 38245 observations read from the data set EMWS1.CLUS5_TRAIN.
NOTE: The data set WORK.CLUS5_STAT has 10 observations and 3 variables.
NOTE: PROCEDURE STDIZE used (Total process time):
      real time           0.25 seconds
      cpu time            0.25 seconds
 
 
12868  quit;
 
12869  data WORK.Clus5_MINMAX;
12870  set WORK.Clus5_STAT;
12871  where _TYPE_ in('P0','P100');
12872  if _TYPE_='P0' then _TYPE_='MIN';
12873  else if _TYPE_='P100' then _TYPE_='MAX';
12874  run;
 
NOTE: There were 2 observations read from the data set WORK.CLUS5_STAT.
      WHERE _TYPE_ in ('P0', 'P100');
NOTE: The data set WORK.CLUS5_MINMAX has 2 observations and 3 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
12875  proc transpose data=WORK.Clus5_MINMAX out=WORK.Clus5_MINMAX(drop=_LABEL_ rename=(_NAME_=_VARIABLE_));
12876  id _TYPE_;
12877  run;
 
WARNING: The variable _LABEL_ in the DROP, KEEP, or RENAME list has never been referenced.
NOTE: There were 2 observations read from the data set WORK.CLUS5_MINMAX.
NOTE: The data set WORK.CLUS5_MINMAX has 2 observations and 3 variables.
NOTE: PROCEDURE TRANSPOSE used (Total process time):
      real time           0.00 seconds
      cpu time            0.01 seconds
 
 
12878  data WORK.Clus5_UGRID;
12879  set WORK.Clus5_MINMAX;
12880  B1 = MIN + (1-1)*(MAX-MIN)/8;
12881  B2 = MIN + (2-1)*(MAX-MIN)/8;
12882  B3 = MIN + (3-1)*(MAX-MIN)/8;
12883  B4 = MIN + (4-1)*(MAX-MIN)/8;
12884  B5 = MIN + (5-1)*(MAX-MIN)/8;
12885  B6 = MIN + (6-1)*(MAX-MIN)/8;
12886  B7 = MIN + (7-1)*(MAX-MIN)/8;
12887  B8 = MIN + (8-1)*(MAX-MIN)/8;
12888  B9 = MIN + (9-1)*(MAX-MIN)/8;
12889  drop MIN MAX;
12890  run;
 
NOTE: There were 2 observations read from the data set WORK.CLUS5_MINMAX.
NOTE: The data set WORK.CLUS5_UGRID has 2 observations and 10 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.01 seconds
 
 
12891  *------------------------------------------------------------*;
12892  * Clus5: Creating formats for binning interval variables;
12893  *------------------------------------------------------------*;
12894  proc format;
12895  value F1_
12896  17-27.125 = "17:27.125"
12897  27.125-37.25 = "27.125:37.25"
12898  37.25-47.375 = "37.25:47.375"
12899  47.375-57.5 = "47.375:57.5"
12900  57.5-67.625 = "57.5:67.625"
12901  67.625-77.75 = "67.625:77.75"
12902  77.75-87.875 = "77.75:87.875"
12903  87.875-98 = "87.875:98"
12904  ;
NOTE: Format F1_ has been output.
12905  value F2_
12906  1-6.25 = "1:6.25"
12907  6.25-11.5 = "6.25:11.5"
12908  11.5-16.75 = "11.5:16.75"
12909  16.75-22 = "16.75:22"
12910  22-27.25 = "22:27.25"
12911  27.25-32.5 = "27.25:32.5"
12912  32.5-37.75 = "32.5:37.75"
12913  37.75-43 = "37.75:43"
12914  ;
NOTE: Format F2_ has been output.
12915  run;
 
NOTE: PROCEDURE FORMAT used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
12916  ods listing close;
12917  ods output crosstabfreqs=WORK.TEMPFREQ;
12918  proc freq data = EMWS1.Clus5_TRAIN order=formatted addnames;
12919  table Age * _SEGMENT_ / missing;
12920  table Career * _SEGMENT_ / missing;
12921  table Contact_Type * _SEGMENT_ / missing;
12922  table Education * _SEGMENT_ / missing;
12923  table Marital_Statues * _SEGMENT_ / missing;
12924  table Number_of_Contacts * _SEGMENT_ / missing;
12925  format AGE F1_.;
12926  format NUMBER_OF_CONTACTS F2_.;
12927  run;
 
NOTE: There were 38245 observations read from the data set EMWS1.FIMPORT3_DATA.
NOTE: View EMWS1.CLUS5_TRAIN.VIEW used (Total process time):
      real time           0.19 seconds
      cpu time            0.18 seconds
 
NOTE: There were 38245 observations read from the data set EMWS1.FIMPORT3_TRAIN.
NOTE: The data set WORK.TEMPFREQ has 258 observations and 17 variables.
NOTE: There were 38245 observations read from the data set EMWS1.CLUS5_TRAIN.
NOTE: PROCEDURE FREQ used (Total process time):
      real time           0.22 seconds
      cpu time            0.21 seconds
 
 
12928  quit;
12929  ods listing;
12930  data EMWS1.Clus5_PROFILE(keep=_VARIABLE_ _SEGMENT_ TYPE COUNT PERCENT _X_ _XLABEL_);
12931  label _VARIABLE_ = "%sysfunc(sasmsg(sashelp.dmine, rpt_variable_vlabel, NOQUOTE))" _SEGMENT_ = "Segment Variable" Type = "%sysfunc(sasmsg(sashelp.dmine, rpt_type_vlabel,         NOQUOTE))" _X_ =
12932     "%sysfunc(sasmsg(sashelp.dmine, rpt_numValue_vlabel, NOQUOTE))" _XLABEL_ = "%sysfunc(sasmsg(sashelp.dmine, rpt_fmtValue_vlabel ,    NOQUOTE))" COUNT = "%sysfunc(sasmsg(sashelp.dmine, rpt_count_vlabel,        NOQUOTE))" PERCENT =
12933     "%sysfunc(sasmsg(sashelp.dmine, rpt_percent_vlabel,      NOQUOTE))";
12934  dsid = open("WORK.TEMPFREQ");
12935  varnum = varnum(dsid, 'ROWVARIABLE');
12936  freqnum = varnum(dsid, 'FREQUENCY');
12937  pvarnum = varnum(dsid, 'PERCENT');
12938  typenum = varnum(dsid, '_TYPE_');
12939  bynum = varnum(dsid, "_SEGMENT_");
12940  length varformat _VARIABLE_ $32 _XLABEL_ $32 TYPE $1;
12941  do while(^fetch(dsid));
12942  count = getvarn(dsid, freqnum);
12943  percent = getvarn(dsid, pvarnum);
12944  _VARIABLE_ = strip(getvarc(dsid, varnum));
12945  varblnum = varnum(dsid, _VARIABLE_);
12946  _SEGMENT_ = getvarn(dsid, bynum);
12947  type = vartype(dsid, varblnum);
12948  varformat = varfmt(dsid, varblnum);
12949  if varformat eq '' then varformat = 'best12.';
12950  _X_=.;
12951  if type = 'N' then do;
12952  _X_ = getvarn(dsid, varblnum);
12953  _XLABEL_ = left(putn(_X_, varformat));
12954  end;
12955  else _XLABEL_ = getvarc(dsid, varblnum);
12956  if getvarc(dsid, typenum) = '11' then output;
12957  end;
12958  dsid = close(dsid);
12959  run;
 
NOTE: The data set EMWS1.CLUS5_PROFILE has 185 observations and 7 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
12960  proc sort data=EMWS1.Clus5_PROFILE NOTHREADS;
12961  by _VARIABLE_ _SEGMENT_;
12962  run;
 
NOTE: There were 185 observations read from the data set EMWS1.CLUS5_PROFILE.
NOTE: The data set EMWS1.CLUS5_PROFILE has 185 observations and 7 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.00 seconds
      cpu time            0.01 seconds
 
 
12963  proc means data=EMWS1.Clus5_PROFILE noprint missing NWAY;
12964  class _VARIABLE_ _SEGMENT_;
12965  var COUNT;
12966  output out=WORK.Clus5_STATCOUNT(keep=_SEGMENT_ _VARIABLE_ SUM) SUM=SUM;
12967  run;
 
NOTE: There were 185 observations read from the data set EMWS1.CLUS5_PROFILE.
NOTE: The data set WORK.CLUS5_STATCOUNT has 30 observations and 3 variables.
NOTE: PROCEDURE MEANS used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
12968  proc sort data=WORK.Clus5_STATCOUNT NOTHREADS;
12969  by _VARIABLE_ _SEGMENT_;
12970  run;
 
NOTE: There were 30 observations read from the data set WORK.CLUS5_STATCOUNT.
NOTE: The data set WORK.CLUS5_STATCOUNT has 30 observations and 3 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.00 seconds
      cpu time            0.01 seconds
 
 
12971  data EMWS1.Clus5_PROFILE(drop=SUM);
12972  label BYPERCENT= "%sysfunc(sasmsg(sashelp.dmine, rpt_percent_vlabel, NOQUOTE, _SEGMENT_))";
12973  merge EMWS1.Clus5_PROFILE WORK.Clus5_STATCOUNT;
12974  by _VARIABLE_ _SEGMENT_;
12975  if SUM ne . then BYPERCENT = 100*COUNT/SUM;
12976  run;
 
NOTE: There were 185 observations read from the data set EMWS1.CLUS5_PROFILE.
NOTE: There were 30 observations read from the data set WORK.CLUS5_STATCOUNT.
NOTE: The data set EMWS1.CLUS5_PROFILE has 185 observations and 8 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
12977  proc sort data=EMWS1.Clus5_PROFILE NOTHREADS;
12978  by _VARIABLE_;
12979  run;
 
NOTE: There were 185 observations read from the data set EMWS1.CLUS5_PROFILE.
NOTE: The data set EMWS1.CLUS5_PROFILE has 185 observations and 8 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
12980  proc sort data=WORK.M2WS6WJE;
12981  by Name;
12982  run;
 
NOTE: There were 7 observations read from the data set WORK.M2WS6WJE.
NOTE: The data set WORK.M2WS6WJE has 7 observations and 21 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.00 seconds
      cpu time            0.01 seconds
 
 
12983  data EMWS1.Clus5_PROFILE;
12984  merge EMWS1.Clus5_PROFILE(in=_a) WORK.M2WS6WJE(keep=Name Label Role rename=(Name=_Variable_ Label=_Label_));
12985  by _Variable_;
12986  label Role = "%sysfunc(sasmsg(sashelp.dmine, meta_role_vlabel ,  NOQUOTE))";
12987  label Label = "%sysfunc(sasmsg(sashelp.dmine, meta_label_vlabel , NOQUOTE))";
12988  if _a then output;
12989  run;
 
NOTE: Variable Label is uninitialized.
WARNING: Multiple lengths were specified for the BY variable _VARIABLE_ by input data sets. This might cause unexpected results.
NOTE: There were 185 observations read from the data set EMWS1.CLUS5_PROFILE.
NOTE: There were 7 observations read from the data set WORK.M2WS6WJE.
NOTE: The data set EMWS1.CLUS5_PROFILE has 185 observations and 10 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.01 seconds
 
 
12990  proc sort data=EMWS1.Clus5_PROFILE;
12991  by _SEGMENT_ _VARIABLE_ _X_;
12992  run;
 
NOTE: There were 185 observations read from the data set EMWS1.CLUS5_PROFILE.
NOTE: The data set EMWS1.CLUS5_PROFILE has 185 observations and 10 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.00 seconds
      cpu time            0.01 seconds
 
 
12993  data EMWS1.Clus5_PROFILE(rename=(_VARIABLE_=Variable _X_=NumericValue _XLABEL_=FmtValue));
12994  set EMWS1.Clus5_PROFILE;
12995  retain orderedValue 0;
12996  label OrderedValue = "%sysfunc(sasmsg(sashelp.dmine, rpt_OrderedValue_vlabel, NOQUOTE))";
12997  by _SEGMENT_ _VARIABLE_;
12998  if first._variable_ then orderedValue=1;
12999  else orderedValue+1;
13000  run;
 
NOTE: There were 185 observations read from the data set EMWS1.CLUS5_PROFILE.
NOTE: The data set EMWS1.CLUS5_PROFILE has 185 observations and 11 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.01 seconds
 
 
13001  proc transpose data=EMWS1.Clus5_OUTVAR out=WORK.Clus5_OUTVAR(where=(COL1 ^in('IMPUTED','OMITTED')));
13002  var Age--Personal_Loanyes;
13003  where _TYPE_ in('TYPE' 'VARIABLE');
13004  run;
 
NOTE: There were 2 observations read from the data set EMWS1.CLUS5_OUTVAR.
      WHERE _TYPE_ in ('TYPE', 'VARIABLE');
NOTE: The data set WORK.CLUS5_OUTVAR has 27 observations and 4 variables.
NOTE: PROCEDURE TRANSPOSE used (Total process time):
      real time           0.00 seconds
      cpu time            0.01 seconds
 
 
13005  *------------------------------------------------------------* ;
13006  * Clus5: DMVQ Variables;
13007  *------------------------------------------------------------* ;
13008  %macro dmvqvars;
13009      Age Number_of_Contacts Careeradministration Careerblue_collar
13010     Careerentrepreneur Careerhousemaid Careermanagement Careerretired
13011     Careerself_employed Careerservices Careerstudent Careertechnician
13012     Careerunemployed Contact_Typecellular Contact_Typetelephone Educationilliterate
13013     Educationprimary_education Educationprofessional_educat
13014     Educationsecondary_education Educationuniversity_educatio
13015     Marital_Statuesdivorced Marital_Statuesmarried Marital_Statuessingle Mortageno
13016     Mortageyes Personal_Loanno Personal_Loanyes
13017  %mend ;
13018
13019
 
13020  data WORK.Clus5_temp;
13021  set EMWS1.Clus5_OUTMEAN;
13022  _idvar_=left(put(_SEGMENT_,4.));
13023  run;
 
NOTE: There were 5 observations read from the data set EMWS1.CLUS5_OUTMEAN.
NOTE: The data set WORK.CLUS5_TEMP has 5 observations and 37 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.01 seconds
 
 
13024  proc distance data=WORK.Clus5_temp out=EMWS1.Clus5_DISTANCE method=l(2) shape=square;
13025  id _idvar_;
13026  var interval(%dmvqvars);
13027  run;
 
NOTE: The data set EMWS1.CLUS5_DISTANCE has 5 observations and 6 variables.
NOTE: PROCEDURE DISTANCE used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
13028  proc mds data=EMWS1.Clus5_DISTANCE out=WORK.Clus5_mds level=absolute nohist shape=square dim=3;
13029  object _idvar_;
13030  run;
 
NOTE: Convergence reached in 4 iterations.
NOTE: The data set WORK.CLUS5_MDS has 6 observations and 8 variables.
NOTE: PROCEDURE MDS used (Total process time):
      real time           0.00 seconds
      cpu time            0.01 seconds
 
 
13031  quit;
13032  data WORK.Clus5_mds;
13033  set WORK.Clus5_mds;
13034  if _type_ ne 'CONFIG' then delete;
13035  run;
 
NOTE: There were 6 observations read from the data set WORK.CLUS5_MDS.
NOTE: The data set WORK.CLUS5_MDS has 5 observations and 8 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.01 seconds
 
 
13036  data WORK.Clus5_mds(label="&label" keep=_idvar_ _radius_ dim1 dim2 dim3);
WARNING: Apparent symbolic reference LABEL not resolved.
13037  merge WORK.Clus5_temp WORK.Clus5_mds;
13038  run;
 
NOTE: There were 5 observations read from the data set WORK.CLUS5_TEMP.
NOTE: There were 5 observations read from the data set WORK.CLUS5_MDS.
NOTE: The data set WORK.CLUS5_MDS has 5 observations and 5 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
13039  options nodate;
13040  title1 "%sysfunc(sasmsg(sashelp.dmine, rpt_ClusterDistance_title, NOQUOTE))";
13041  %plotit(data=WORK.Clus5_mds, datatype=mds, radii=_radius_, labelvar=_idvar_, symtype=circle, symbols='*', gout=WORK.Clus5, gname=DISTANCE, gopts2=nodisplay, gopts=device=GIF, gopplot=cback=white, titlecol=black, labelcol=black, tickcol=black,
13042     framecol=black, post=C:\Users\20161277\AppData\Local\Temp\72\SAS Temporary Files\_TD94900_BA-TEACHING_\plotit.ps);
 
                                                                                                                    Types Legend  | CONFIG
                                                                                                                    --------------+---------
                                                                                                                    Symbol Types  | circle
                                                                                                                    Symbols       | *
                                                                                                                    Symbol Colors | cx000000
                                                                                                                    Label  Colors | cx000000
                                                                                                                    Symbol Sizes  | 1
                                                                                                                    Label  Sizes  | 1
                                                                                                                    Symbol Fonts  | none
                                                                                                                    Label  Fonts  | none
                                                                                                                    ------------------------
 
                                                                                                         Iterative Scatter Plot of Labeled Points Macro
 
                                                                                                    Iteration    Place    Line Size    Page Size    Penalty
                                                                                                    -------------------------------------------------------
                                                                                                        1          2         65           45            0
 
The following code will create the printer plot on which the graphical plot is based:
 
options nonumber ls=65 ps=45;
proc plot nolegend formchar='|----|+|---' data=preproc vtoh=2;
   plot Dim2 * Dim1 $ _idvar_ = _symbol_ /
        haxis=by 5 vaxis=by 5 box list=1
        placement=((h=2 -2 : s=right left) (v=1 -1 * h=0 -1 to -5 by alt));
   label Dim2 = 'Dimension 2' Dim1 = 'Dimension 1';
   label Dim2 = '#' Dim1 = '#';
   run; quit;
 
The plot was created with the following goptions:
 
goptions nodisplay hpos=90 vpos=34 hsize=8.33in vsize=6.24in cback=white device=GIF;
 
The OUT=anno Annotate data set has 276 observations.
The PLOTIT macro used 0.7 seconds to create OUT=anno.
13043  goptions display;
13044  title;
 
13045  filename gsasfile "C:\Users\20161277\Documents\CA assign 2
13045! data\20161277_CAassignment2\Workspaces\EMWS1\Clus5\GRAPH\Distance.gif";
13046  goptions reset=all device=PNG display gaccess= gsasfile gsfmode= replace cback= white;
13047  proc greplay igout=WORK.Clus5 nofs;
NOTE: Building list of graphs from the catalog.
 
NOTE: Enter greplay commands or statements.
13048  replay DISTANCE;
NOTE: This SAS session is using a registry in WORK.  All changes will be lost at the end of this
      session.
NOTE: 28330 bytes written to C:\Users\20161277\Documents\CA assign 2
      data\20161277_CAassignment2\Workspaces\EMWS1\Clus5\GRAPH\Distance.gif.
13049  quit;
 
NOTE: PROCEDURE GREPLAY used (Total process time):
      real time           0.12 seconds
      cpu time            0.12 seconds
 
 
13050  goptions reset=all;
13051  filename gsasfile;
NOTE: Fileref GSASFILE has been deassigned.
 
13052  proc datasets lib=EMWS1 nolist;
13053  modify Clus5_DISTANCE;
13054  rename _idvar_=_SEGMENT_;
NOTE: Renaming variable _idvar_ to _SEGMENT_.
13055  run;
 
NOTE: MODIFY was successful for EMWS1.CLUS5_DISTANCE.DATA.
13056  quit;
 
NOTE: PROCEDURE DATASETS used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
13057  *------------------------------------------------------------*;
13058  * Clus5: Creating data set for Input Mean report;
13059  *------------------------------------------------------------*;
13060  data temp(drop=_type_ over_all);
13061  set EMWS1.Clus5_OUTSTAT;
13062  where _type_ in('DMDB_MEAN', 'CLUS_MEAN');
13063  run;
 
NOTE: There were 6 observations read from the data set EMWS1.CLUS5_OUTSTAT.
      WHERE _type_ in ('CLUS_MEAN', 'DMDB_MEAN');
NOTE: The data set WORK.TEMP has 6 observations and 28 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
13064  proc sort data=temp;
13065  by _SEGMENT_;
13066  run;
 
NOTE: There were 6 observations read from the data set WORK.TEMP.
NOTE: The data set WORK.TEMP has 6 observations and 28 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
13067  proc stdize data=temp out=stdtemp pctlpts=0 100 outstat=stat;
13068  var Age--Personal_Loanyes;
13069  run;
 
NOTE: There were 6 observations read from the data set WORK.TEMP.
NOTE: The data set WORK.STDTEMP has 6 observations and 28 variables.
NOTE: The data set WORK.STAT has 10 observations and 28 variables.
NOTE: PROCEDURE STDIZE used (Total process time):
      real time           0.00 seconds
      cpu time            0.01 seconds
 
 
13070  proc transpose data=stat out=tstat(rename=(COL1=MEAN COL2=STD COL3=MIN COL4=MAX));
13071  where _type_ in ('LOCATION', 'SCALE','P0', 'P100');
13072  run;
 
NOTE: There were 4 observations read from the data set WORK.STAT.
      WHERE _type_ in ('LOCATION', 'P0', 'P100', 'SCALE');
NOTE: The data set WORK.TSTAT has 27 observations and 6 variables.
NOTE: PROCEDURE TRANSPOSE used (Total process time):
      real time           0.00 seconds
      cpu time            0.01 seconds
 
 
13073  data tstat( rename=(_NAME_=NAME) keep=_NAME_ cv stdmin stdmax);
13074  set tstat;
13075  if std ^in (0, .) then do;
13076  stdmin = abs((min-mean)/std);
13077  stdmax = abs((max-mean)/std);
13078  end;
13079  if mean ^in(0, .) then cv = std/mean;
13080  run;
 
NOTE: There were 27 observations read from the data set WORK.TSTAT.
NOTE: The data set WORK.TSTAT has 27 observations and 4 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.01 seconds
 
 
13081  proc sort data=tstat;
13082  by NAME;
13083  run;
 
NOTE: There were 27 observations read from the data set WORK.TSTAT.
NOTE: The data set WORK.TSTAT has 27 observations and 4 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
13084  proc transpose data=stdtemp out=tstdtemp(rename=(_NAME_=NAME _LABEL_=LABEL COL1=MEAN));
13085  by _SEGMENT_;
13086  run;
 
NOTE: There were 6 observations read from the data set WORK.STDTEMP.
NOTE: The data set WORK.TSTDTEMP has 162 observations and 4 variables.
NOTE: PROCEDURE TRANSPOSE used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
13087  proc sort data=tstdtemp;
13088  by NAME;
13089  run;
 
NOTE: There were 162 observations read from the data set WORK.TSTDTEMP.
NOTE: The data set WORK.TSTDTEMP has 162 observations and 4 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.00 seconds
      cpu time            0.01 seconds
 
 
13090  data tstdtemp;
13091  merge tstdtemp tstat;
13092  by NAME;
13093  STDMEAN = (MEAN + stdmin)/(stdmin + stdmax);
13094  drop stdmin stdmax mean;
13095  run;
 
NOTE: There were 162 observations read from the data set WORK.TSTDTEMP.
NOTE: There were 27 observations read from the data set WORK.TSTAT.
NOTE: The data set WORK.TSTDTEMP has 162 observations and 5 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.01 seconds
 
 
13096  proc transpose data=EMWS1.Clus5_OUTVAR out=tempVar(drop=_LABEL_ rename=( _NAME_=NAME
13096! VARIABLE=INPUT));
13097  var Age--Personal_Loanyes;
13098  id _type_;
13099  where _type_ = 'VARIABLE';
13100  run;
 
NOTE: There were 1 observations read from the data set EMWS1.CLUS5_OUTVAR.
      WHERE _type_='VARIABLE';
NOTE: The data set WORK.TEMPVAR has 27 observations and 2 variables.
NOTE: PROCEDURE TRANSPOSE used (Total process time):
      real time           0.00 seconds
      cpu time            0.01 seconds
 
 
13101  proc sort data=tempVar;
13102  by NAME;
13103  run;
 
NOTE: There were 27 observations read from the data set WORK.TEMPVAR.
NOTE: The data set WORK.TEMPVAR has 27 observations and 2 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
13104  data EMWS1.Clus5_INPUTMEAN(rename=(NAME=VARIABLE));
13105  Length _SEGMENT_CHAR_ $7;
13106  label _SEGMENT_ = "%sysfunc(sasmsg(sashelp.dmine, rpt_segmentName_vlabel,  NOQUOTE))"
13106! _SEGMENT_CHAR_ = "%sysfunc(sasmsg(sashelp.dmine, rpt_segmentId_vlabel,    NOQUOTE))" NAME =
13106! "%sysfunc(sasmsg(sashelp.dmine, rpt_variable_vlabel,     NOQUOTE))" INPUT =
13107     "%sysfunc(sasmsg(sashelp.dmine, rpt_input_vlabel,        NOQUOTE))" LABEL =
13107! "%sysfunc(sasmsg(sashelp.dmine, rpt_label_vlabel,        NOQUOTE))" CV =
13107! "%sysfunc(sasmsg(sashelp.dmine, rpt_cv_vlabel,           NOQUOTE))" STDMEAN =
13108     "%sysfunc(sasmsg(sashelp.dmine, rpt_normmean_vlabel,     NOQUOTE))";
13109  merge tempvar tstdtemp;
13110  by NAME;
13111  if LABEL='' then LABEL=NAME;
13112  _SEGMENT_CHAR_ = strip(put(_SEGMENT_, best.));
13113  if _SEGMENT_ = . then _SEGMENT_CHAR_='Overall';
13114  run;
 
NOTE: There were 27 observations read from the data set WORK.TEMPVAR.
NOTE: There were 162 observations read from the data set WORK.TSTDTEMP.
NOTE: The data set EMWS1.CLUS5_INPUTMEAN has 162 observations and 7 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
13115  proc sort data=EMWS1.Clus5_INPUTMEAN;
13116  by descending cv;
13117  run;
 
NOTE: There were 162 observations read from the data set EMWS1.CLUS5_INPUTMEAN.
NOTE: The data set EMWS1.CLUS5_INPUTMEAN has 162 observations and 7 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
13118  *------------------------------------------------------------*;
13119  * Clus5: Determining the important variables;
13120  *------------------------------------------------------------*;
 
13121  %let _nobs = 0;
13122  data keepvars(rename=(NAME=INPUT));
13123  set EMWS1.Clus5_OUTIMPORT(where=(IMPORTANCE>0.5)) end=eof;
13124  if eof then call symput('_nobs', strip(put(_N_, best.)));
13125  run;
 
NOTE: There were 6 observations read from the data set EMWS1.CLUS5_OUTIMPORT.
      WHERE IMPORTANCE>0.5;
NOTE: The data set WORK.KEEPVARS has 6 observations and 5 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
13126  proc transpose data=EMWS1.Clus5_OUTVAR out=tempVar(drop=_LABEL_ rename=( _NAME_=NAME
13126! VARIABLE=INPUT));
13127  var Age--Personal_Loanyes;
13128  id _type_;
13129  where _type_ = 'VARIABLE';
13130  run;
 
NOTE: There were 1 observations read from the data set EMWS1.CLUS5_OUTVAR.
      WHERE _type_='VARIABLE';
NOTE: The data set WORK.TEMPVAR has 27 observations and 2 variables.
NOTE: PROCEDURE TRANSPOSE used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
13131  proc sort data=keepvars;
13132  by INPUT;
13133  run;
 
NOTE: There were 6 observations read from the data set WORK.KEEPVARS.
NOTE: The data set WORK.KEEPVARS has 6 observations and 5 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
13134  proc sort data=tempvar;
13135  by INPUT;
13136  run;
 
NOTE: There were 27 observations read from the data set WORK.TEMPVAR.
NOTE: The data set WORK.TEMPVAR has 27 observations and 2 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
13137  data vars;
13138  merge tempvar keepvars(in=b);
13139  by INPUT;
13140  if b then output;
13141  run;
 
WARNING: Multiple lengths were specified for the BY variable INPUT by input data sets. This might
         cause unexpected results.
NOTE: There were 27 observations read from the data set WORK.TEMPVAR.
NOTE: There were 6 observations read from the data set WORK.KEEPVARS.
NOTE: The data set WORK.VARS has 23 observations and 6 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.01 seconds
 
 
13142  proc sort data=vars;
13143  by descending importance;
13144  run;
 
NOTE: There were 23 observations read from the data set WORK.VARS.
NOTE: The data set WORK.VARS has 23 observations and 6 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
13145  data _null_;
13146  set vars;
13147  if _N_=1 then call symput('CLUS_PROFVARS', strip(NAME));
13148  else call symput('CLUS_PROFVARS',symget('CLUS_PROFVARS')!!' '!!strip(NAME));
13149  run;
 
NOTE: There were 23 observations read from the data set WORK.VARS.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
13150  *------------------------------------------------------------*;
13151  * mergeVarMeansandClusLabel;
13152  *------------------------------------------------------------*;
13153  data temp(keep=_SEGMENT_ &CLUS_PROFVARS);
13154  length _SEGMENT_ &CLUS_PROFVARS 8;
13155  set EMWS1.Clus5_OUTSTAT;
13156  where _type_ ='CLUS_MEAN';
13157  run;
 
NOTE: There were 5 observations read from the data set EMWS1.CLUS5_OUTSTAT.
      WHERE _type_='CLUS_MEAN';
NOTE: The data set WORK.TEMP has 5 observations and 24 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.01 seconds
 
 
13158  proc sort data=temp;
13159  by _SEGMENT_;
13160  run;
 
NOTE: There were 5 observations read from the data set WORK.TEMP.
NOTE: The data set WORK.TEMP has 5 observations and 24 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
13161  data EMWS1.Clus5_LABEL;
13162  merge EMWS1.Clus5_LABEL(keep=_SEGMENT_ LABEL) temp;
13163  by _SEGMENT_;
13164  run;
 
NOTE: There were 5 observations read from the data set EMWS1.CLUS5_LABEL.
NOTE: There were 5 observations read from the data set WORK.TEMP.
NOTE: The data set EMWS1.CLUS5_LABEL has 5 observations and 25 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
